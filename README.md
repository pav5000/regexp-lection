# Регулярные выражения

## Простое совпадение текста

Большинство букв и символов соответствуют сами себе.
Символы, которые не соответствуют сами себе (метасимволы): `. ^ $ * + ? { [ ] \ | ( )`
Если в регулярку написать часть текста (просто буквами), то совпадение сработает, если этот кусок пристутствует в проверяемом тексте.

```
"when bob will meet us" =~ /bob/ -> true
"when we'll meet robert" =~ /bob/ -> false
```

**Регулярка матчит любой кусок строки.**

Первые метасимволы:
- `^` — Начало строки.
- `$` — Конец строки.

```
"bob" =~ /^bob$/ —> true
"bob roth" =~ /^bob$/ —> false
"bob roth" =~ /^bob/ —> true
"who is bob?" =~ /^bob/ —> false
"this is bob" =~ /bob$/ —> true
"this is bob's sister" =~ /bob$/ —> false
```

## Классы символов

- `[abc]` — соответствие любой из трех букв a, b или c.
- `[a-z]` — соответствие любой строчной английской букве (от a до z).
- `[0-9a-z]` — соответствие любой строчной английской букве (от a до z) или числу от 0 до 9.
- `[^abc]` — метасимвол `^` в начале класса означает "всё, кроме abc".

```
"order=5" =~ /order=[0-9]/ —> true
"service_letter=f" =~ /service_letter=[a-z]/ —> true
"hexcode=a7bf" =~ /hexcode=[0-9a-f][0-9a-f][0-9a-f][0-9a-f]/ —> true
"not_digits=5" =~ /not_digits=[^0-9]/ —> false
```

Метасимволы теряют свою силу внутри классов (кроме `\ ] ^ -`).
Потому что:
- `\` для экранирования
- `]` для обозначения конца класса
- `^` отрицание (здесь он не означает начало строки)
- `-` диапазон
```
"a*b+c" =~ /a[+-*]b[+-*]c/ -> true
```

### Встроенные классы

Некоторые из них:
- `\d` — любая цифра. `[0-9]`
- `\D` — любая не цифра. `[^0-9]`
- `\w` — латинская буква, цифра или подчеркивание. `[a-zA-Z0-9_]`
- `\W` — не латинская буква, не цифра и не подчеркивание. `[^a-zA-Z0-9_]`
- `\s` — пробельный символ. `[\r\n\t\f\v ]`
- `\S` — не пробельный символ. `[^\r\n\t\f\v ]`

Могут быть включены в классы символов.
```
/[\da-f]/ == /[0-9a-f]/
```

## Квантификаторы

Определяют количество повторений. Ставятся после того, что повторяется.

- `+` — повторение 1 и более раз.
- `*` — повторение 0 и более раз.
- `?` — повторение 0 или 1 раз.
- `{5}` — повторение точно 5 раз.
- `{2,8}` — повторение от 2 до 8 раз.
- `{2,}` — повторение 2 и более раз.
- `{,8}` — повторение не более 8 раз.

```
"hexcode=a7bf"    =~ /hexcode=[0-9a-f]+/ —> true
"hexcode=a7"      =~ /hexcode=[0-9a-f]+/ —> true
"hexcode=a7bf8bc" =~ /hexcode=[0-9a-f]+/ —> true
"hexcode="        =~ /hexcode=[0-9a-f]+/ —> false
"hexcode="        =~ /hexcode=[0-9a-f]*/ —> true

"caaaaaaaat" =~ /ca+t/   -> true
"caaaaaaaat" =~ /ca*t/   -> true
"caaaaaaaat" =~ /ca{8}t/ -> true
"caaaaaaaat" =~ /ca{7}t/ -> false

"http://ozon.ru"  =~ /^https?:/ —> true
"https://ozon.ru" =~ /^https?:/ —> true
```

